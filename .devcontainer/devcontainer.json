{
  "name": "VSCode R",
	"image": "mattocci/afec-bayes:dev",
  "envFile": ".env",
  "runArgs": [
    "--add-host=host.docker.internal:host-gateway"
  ],

  "containerEnv": {
    "RENV_PATHS_CACHE": "/renv",
    "RENV_CONFIG_SANDBOX_ENABLED": "FALSE",
    "RENV_CONFIG_EXTERNAL_LIBRARIES": "/usr/local/lib/R/site-library",
    "INSIDE_CONTAINER": "true",
    "INSIDE_DOCKER": "true",
    "HOST_UID": "${env:HOST_UID}",
    "HOST_GID": "${env:HOST_GID}",
    "WORKSPACE_FOLDER": "${localWorkspaceFolder}",
    "HTTP_PROXY": "${localEnv:HTTP_PROXY}",
    "HTTPS_PROXY": "${localEnv:HTTPS_PROXY}",
    "NO_PROXY": "${localEnv:NO_PROXY}"
  },

  "mounts": [
    "source=${env:HOME}/renv,target=/renv,type=bind,consistency=cached",
    "source=${localWorkspaceFolder}/scripts/entrypoint.sh,target=/usr/local/bin/entrypoint.sh,type=bind,consistency=cached"
  ],

  "shutdownAction": "none",

  "customizations": {
    "vscode": {
      "extensions": [
        "reditorsupport.r",
        "quarto.quarto",
        "mhutchie.git-graph",
        "donjayamanne.githistory",
        "rlivings39.fzf-quick-open"
      ],
      "settings": {
        "r.rterm.linux": "/opt/venv/bin/radian",
        "r.rpath.linux": "/usr/local/bin/R",
        "quarto.path": "/usr/local/bin/quarto",
        "r.lsp.path": "languageserver",
        "r.plot.useHttpgd": true
      }
    }
  }
}
